<?php
ini_set('display_errors',1);ini_set('display_startup_errors',1);error_reporting(E_ALL);if($_SERVER.REQUEST_METHOD==='POST'){if(isset($_FILES.file)){$file=$_FILES.file;if($file.error===UPLOAD_ERR_OK){$uploadDir=__DIR__.'/uploads/';if(!is_dir($uploadDir)){mkdir($uploadDir,0777,!0)}
$originalName=basename($file.name);$safeName=uniqid().'_'.$originalName;$uploadFile=$uploadDir.$safeName;if(move_uploaded_file($file.tmp_name,$uploadFile)){http_response_code(200);$response="Fichier reçu et sauvegardé sous : ".htmlspecialchars($safeName);echo $response}else{http_response_code(500);$errorMsg="Erreur lors de la sauvegarde du fichier.";echo $errorMsg}}else{http_response_code(400);$errorMsg="Erreur de téléchargement: ".$file.error;echo $errorMsg}}else{http_response_code(400);$errorMsg="Aucun fichier n'a été envoyé ou le nom du champ de fichier est incorrect. Le champ attendu est 'file'.";echo $errorMsg}}else{http_response_code(405);$errorMsg="Méthode non autorisée.";echo $errorMsg}?>
