<!DOCTYPE html><html lang="fr"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>HTTP Replay Tool</title><link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}"></head><body><div class="container"><h1>HTTP Replay Tool</h1>{%for req in requests%}<div class="request-block"><form method="post" enctype="multipart/form-data"><input type="hidden" name="index" value="{{ loop.index0 }}"><label for="method-{{ loop.index0 }}">Méthode:</label><input type="text" name="method" id="method-{{ loop.index0 }}" value="{{ req.method }}"><label for="url-{{ loop.index0 }}">URL:</label><input type="text" name="url" id="url-{{ loop.index0 }}" value="{{ req.url }}"><label>En-têtes:</label><div class="headers-container">{%for key,value in req.headers.items()%}<div class="header-pair"><input type="text" name="header_key[]" value="{{ key }}" placeholder="Nom de l'en-tête"><input type="text" name="header_value[]" value="{{ value }}" placeholder="Valeur de l'en-tête"></div>{%endfor%}</div><button type="button" class="add-header-btn">Ajouter un en-tête</button><label for="content-{{ loop.index0 }}">Contenu(corps de la requête principal):</label><textarea name="content" id="content-{{ loop.index0 }}" rows="5">{{req.content}}</textarea><label for="file_upload-{{ loop.index0 }}">Sélectionner un fichier(facultatif):</label><div class="file-upload-wrapper"><input type="file" name="file_upload" id="file_upload-{{ loop.index0 }}" class="hidden-file-input"><button type="button" class="custom-file-upload-btn">Choisir un fichier</button><span class="file-name">Aucun fichier sélectionné</span></div><label for="protocol-{{ loop.index0 }}">Protocole HTTP:</label><select name="protocol" id="protocol-{{ loop.index0 }}"><option value="HTTP/1.1"{%if req.protocol=='HTTP/1.1'%}selected{%endif%}>HTTP/1.1</option><option value="HTTP/2"{%if req.protocol=='HTTP/2'%}selected{%endif%}>HTTP/2</option></select><button type="submit">Rejouer la requête</button></form></div>{%endfor%}
{%if output%}<div class="response-output"><h3>Résultat de la requête</h3><pre>{{output}}</pre></div>{%endif%}</div><script>document.querySelectorAll('.add-header-btn').forEach(button=>{button.addEventListener('click',function(){const container=this.previousElementSibling;const newPair=document.createElement('div');newPair.classList.add('header-pair');newPair.innerHTML=`
                <input type="text" name="header_key[]" placeholder="Nom de l'en-tête">
                <input type="text" name="header_value[]" placeholder="Valeur de l'en-tête">
            `;container.appendChild(newPair)})});document.querySelectorAll('.custom-file-upload-btn').forEach(button=>{button.addEventListener('click',function(){this.closest('.file-upload-wrapper').querySelector('.hidden-file-input').click()})});document.querySelectorAll('.hidden-file-input').forEach(input=>{input.addEventListener('change',function(){const fileNameDisplay=this.closest('.file-upload-wrapper').querySelector('.file-name');if(this.files.length>0){fileNameDisplay.textContent=this.files[0].name}else{fileNameDisplay.textContent='Aucun fichier sélectionné'}})});</script></body></html>
